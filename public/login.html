<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EMK Admin</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600&family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --red:#E53935;
  --red2:#FF5252;
  --bg:#080808;
  --bg2:#0E0E0E;
  --bg3:#161616;
  --border:#1F1F1F;
  --text:#EFEFEF;
  --muted:#4A4A4A;
  --muted2:#777;
}
html,body{height:100%;background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;overflow:hidden}
body{display:flex;align-items:stretch}

/* Noise overlay */
body::before{
  content:'';position:fixed;inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events:none;z-index:0;opacity:0.4;
}

/* Left */
.left{
  flex:1.2;display:flex;flex-direction:column;justify-content:space-between;
  padding:52px 60px;position:relative;overflow:hidden;
}
.left-glow{
  position:absolute;top:-300px;left:-200px;
  width:700px;height:700px;
  background:radial-gradient(circle,rgba(229,57,53,0.07) 0%,transparent 65%);
  pointer-events:none;
}
.left-glow2{
  position:absolute;bottom:-200px;right:0;
  width:500px;height:500px;
  background:radial-gradient(circle,rgba(229,57,53,0.04) 0%,transparent 65%);
  pointer-events:none;
}

/* Animated grid */
.grid-bg{
  position:absolute;inset:0;
  background-image:
    linear-gradient(rgba(255,255,255,0.02) 1px,transparent 1px),
    linear-gradient(90deg,rgba(255,255,255,0.02) 1px,transparent 1px);
  background-size:60px 60px;
  mask-image:radial-gradient(ellipse 80% 80% at 20% 40%,black 20%,transparent 100%);
  pointer-events:none;
  animation:gridDrift 20s linear infinite;
}
@keyframes gridDrift{0%{background-position:0 0}100%{background-position:60px 60px}}

.logo{
  position:relative;z-index:1;
  display:flex;align-items:center;gap:10px;
}
.logo-mark{
  width:32px;height:32px;position:relative;
  display:flex;align-items:center;justify-content:center;
}
.logo-mark::before{
  content:'';position:absolute;inset:0;
  border:1px solid var(--red);
  transform:rotate(45deg);border-radius:3px;
}
.logo-mark::after{
  content:'';position:absolute;
  width:8px;height:8px;background:var(--red);
  border-radius:1px;transform:rotate(45deg);
}
.logo-text{
  font-family:'DM Sans',sans-serif;font-weight:600;
  font-size:13px;letter-spacing:4px;text-transform:uppercase;
  color:var(--text);opacity:0.9;
}

.hero{position:relative;z-index:1;margin:auto 0;}
.hero-eyebrow{
  font-size:11px;letter-spacing:3px;text-transform:uppercase;
  color:var(--red);font-weight:500;margin-bottom:20px;
  display:flex;align-items:center;gap:8px;
}
.hero-eyebrow::before{
  content:'';width:24px;height:1px;background:var(--red);
}
.hero h1{
  font-family:'DM Serif Display',serif;
  font-size:clamp(40px,4.5vw,62px);
  line-height:1.05;font-weight:400;
  color:var(--text);margin-bottom:24px;
}
.hero h1 em{
  font-style:italic;color:var(--red);
}
.hero-desc{
  font-size:15px;line-height:1.7;
  color:var(--muted2);max-width:400px;
}

.features{
  position:relative;z-index:1;
  display:grid;grid-template-columns:1fr 1fr;gap:1px;
  border:1px solid var(--border);border-radius:12px;overflow:hidden;
  background:var(--border);
}
.feat{
  background:var(--bg2);padding:20px;
  transition:background 0.2s;
}
.feat:hover{background:var(--bg3);}
.feat-num{
  font-family:'DM Serif Display',serif;font-style:italic;
  font-size:28px;color:var(--red);opacity:0.6;margin-bottom:6px;
}
.feat-label{font-size:12px;color:var(--muted2);font-weight:400;}

/* Right */
.right{
  width:460px;flex-shrink:0;
  display:flex;align-items:center;justify-content:center;
  background:var(--bg2);
  border-left:1px solid var(--border);
  padding:52px 48px;
  position:relative;
}
.right::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,transparent,var(--red),transparent);
  opacity:0.5;
}

.form-wrap{width:100%;max-width:340px;}

.form-header{margin-bottom:40px;}
.form-header h2{
  font-family:'DM Serif Display',serif;
  font-size:32px;font-weight:400;
  margin-bottom:6px;
}
.form-header p{font-size:13px;color:var(--muted2);}

.field{margin-bottom:18px;}
.field-label{
  font-size:11px;letter-spacing:1.5px;text-transform:uppercase;
  color:var(--muted2);font-weight:500;margin-bottom:8px;display:block;
}
.field-input-wrap{position:relative;}
.field-input{
  width:100%;background:var(--bg3);
  border:1px solid var(--border);border-radius:8px;
  padding:12px 16px;
  color:var(--text);font-family:'DM Sans',sans-serif;font-size:14px;
  outline:none;transition:border-color 0.2s,background 0.2s;
  -webkit-autofill:{background:var(--bg3);}
}
.field-input:focus{
  border-color:rgba(229,57,53,0.5);
  background:#111;
  box-shadow:0 0 0 3px rgba(229,57,53,0.06);
}
.field-input::placeholder{color:var(--muted);}
.toggle-pwd{
  position:absolute;right:12px;top:50%;transform:translateY(-50%);
  background:none;border:none;color:var(--muted2);cursor:pointer;
  padding:4px;display:flex;align-items:center;transition:color 0.15s;
}
.toggle-pwd:hover{color:var(--text);}
.toggle-pwd svg{width:15px;height:15px;stroke:currentColor;fill:none;stroke-width:2;}

.submit-btn{
  width:100%;padding:13px;margin-top:6px;
  background:var(--red);border:none;border-radius:8px;
  color:#fff;font-family:'DM Sans',sans-serif;font-weight:600;font-size:14px;
  cursor:pointer;letter-spacing:0.3px;
  transition:background 0.2s,transform 0.1s,box-shadow 0.2s;
  position:relative;overflow:hidden;
}
.submit-btn::after{
  content:'';position:absolute;inset:0;
  background:linear-gradient(to bottom,rgba(255,255,255,0.07),transparent);
  pointer-events:none;
}
.submit-btn:hover{background:#C62828;box-shadow:0 6px 24px rgba(229,57,53,0.35);}
.submit-btn:active{transform:scale(0.99);}
.submit-btn.loading{pointer-events:none;opacity:0.8;}

.btn-inner{display:flex;align-items:center;justify-content:center;gap:8px;}
.spinner{
  display:none;width:15px;height:15px;
  border:2px solid rgba(255,255,255,0.3);
  border-top-color:#fff;border-radius:50%;
  animation:spin 0.65s linear infinite;
}
.submit-btn.loading .spinner{display:block;}
.submit-btn.loading .btn-label{display:none;}
@keyframes spin{to{transform:rotate(360deg)}}

.error-box{
  margin-top:14px;padding:10px 14px;
  background:rgba(229,57,53,0.07);
  border:1px solid rgba(229,57,53,0.2);
  border-radius:7px;font-size:12px;color:#EF9A9A;
  display:none;align-items:center;gap:8px;
}
.error-box.show{display:flex;}

.timeout-box{
  margin-bottom:20px;padding:10px 14px;
  background:rgba(255,160,0,0.07);
  border:1px solid rgba(255,160,0,0.2);
  border-radius:7px;font-size:12px;color:#FFB74D;
  display:none;
}
.timeout-box.show{display:block;}

.security-note{
  display:flex;align-items:center;gap:6px;
  margin-top:20px;font-size:11px;color:var(--muted);
  justify-content:center;
}
.security-note svg{width:12px;height:12px;stroke:currentColor;fill:none;stroke-width:2;flex-shrink:0;}

/* Entrance animations */
.left{animation:slideLeft 0.7s cubic-bezier(0.22,1,0.36,1) both;}
.right{animation:slideRight 0.7s cubic-bezier(0.22,1,0.36,1) 0.1s both;}
.hero-eyebrow{animation:fadeUp 0.6s ease 0.3s both;}
.hero h1{animation:fadeUp 0.6s ease 0.4s both;}
.hero-desc{animation:fadeUp 0.6s ease 0.5s both;}
.features{animation:fadeUp 0.6s ease 0.6s both;}
.form-wrap{animation:fadeUp 0.6s ease 0.2s both;}

@keyframes slideLeft{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}
@keyframes slideRight{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<div class="left">
  <div class="left-glow"></div>
  <div class="left-glow2"></div>
  <div class="grid-bg"></div>

  <div class="logo">
    <div class="logo-mark"></div>
    <span class="logo-text">EMK Admin</span>
  </div>

  <div class="hero">
    <div class="hero-eyebrow">Yönetim Paneli</div>
    <h1>Bot Kontrol<br><em>Merkezi</em></h1>
    <p class="hero-desc">WhatsApp botunuzu buradan yönetin. Model seçimi, prompt düzenleme, token takibi ve canlı kontrol.</p>
  </div>

  <div class="features">
    <div class="feat">
      <div class="feat-num">01</div>
      <div class="feat-label">Güvenli JWT Erişim</div>
    </div>
    <div class="feat">
      <div class="feat-num">02</div>
      <div class="feat-label">Anlık Model Değişimi</div>
    </div>
    <div class="feat">
      <div class="feat-num">03</div>
      <div class="feat-label">Token İstatistikleri</div>
    </div>
    <div class="feat">
      <div class="feat-num">04</div>
      <div class="feat-label">Acil Kill Switch</div>
    </div>
  </div>
</div>

<div class="right">
  <div class="form-wrap">
    <div class="form-header">
      <h2>Giriş Yap</h2>
      <p>Yetkili erişim gereklidir</p>
    </div>

    <div class="timeout-box" id="timeoutBox">
      ⏱ Oturumunuz zaman aşımına uğradı.
    </div>

    <form id="loginForm" autocomplete="off">
      <div class="field">
        <label class="field-label">Kullanıcı Adı</label>
        <div class="field-input-wrap">
          <input class="field-input" type="text" id="username" placeholder="admin" autocomplete="off" spellcheck="false">
        </div>
      </div>
      <div class="field">
        <label class="field-label">Şifre</label>
        <div class="field-input-wrap">
          <input class="field-input" type="password" id="password" placeholder="••••••••••••" autocomplete="off">
          <button type="button" class="toggle-pwd" id="togglePwd">
            <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          </button>
        </div>
      </div>
      <button type="submit" class="submit-btn" id="submitBtn">
        <div class="btn-inner">
          <span class="btn-label">Giriş Yap</span>
          <div class="spinner"></div>
        </div>
      </button>
    </form>

    <div class="error-box" id="errorBox">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
      <span id="errorText"></span>
    </div>

    <div class="security-note">
      <svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
      5 başarısız denemede 15 dakika bekleme
    </div>
  </div>
</div>

<script>
if(new URLSearchParams(location.search).get('reason')==='timeout')
  document.getElementById('timeoutBox').classList.add('show');

document.getElementById('togglePwd').addEventListener('click',()=>{
  const p=document.getElementById('password');
  p.type=p.type==='password'?'text':'password';
});

document.getElementById('loginForm').addEventListener('submit',async e=>{
  e.preventDefault();
  const btn=document.getElementById('submitBtn');
  const err=document.getElementById('errorBox');
  btn.classList.add('loading');
  err.classList.remove('show');
  try{
    const r=await fetch('/login',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      credentials:'same-origin',
      body:JSON.stringify({
        username:document.getElementById('username').value.trim(),
        password:document.getElementById('password').value
      })
    });
    const d=await r.json();
    if(d.success){window.location.href='/dashboard';}
    else{
      document.getElementById('errorText').textContent=d.error||'Giriş başarısız.';
      err.classList.add('show');
    }
  }catch{
    document.getElementById('errorText').textContent='Sunucuya bağlanılamadı.';
    err.classList.add('show');
  }finally{btn.classList.remove('loading');}
});
</script>
</body>
</html>
